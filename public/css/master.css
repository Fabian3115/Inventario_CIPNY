/* ===========================
   C.I. PISCÍCOLA NEW YORK UI (versión corporativa AZUL/ROJO)
   =========================== */

/* Paleta y tokens */
:root{
  /* ---- Colores corporativos ---- */
  --ny-blue-800:#00387f;
  --ny-blue-700:#004aad;   /* Azul primario sugerido */
  --ny-blue-600:#0a5bca;
  --ny-blue-500:#2f73d6;

  --ny-red-600:#c31f2d;    /* Rojo acento */
  --ny-red-500:#d72638;
  --ny-red-100:#fde8ec;

  --ny-blue-100:#e8f0fe;   /* Azul muy claro para fondos suaves */
  --ny-sand-50:#ffffff;    /* Fondo blanco, como el logo */
  --ny-gray-700:#111;      /* Texto negro */
  --ny-gray-500:#555;
  --ny-gray-100:#f5f7fa;

  --hover-light:#eef4ff;   /* hover claro con matiz azul */
}

body{ background: var(--ny-sand-50); color: var(--ny-gray-700); }


/* ========= Topbar (navbar) con gradiente ROJO → AZUL ========= */
.topbar{
  background: linear-gradient(90deg, var(--ny-red-500), var(--ny-blue-700));
  height: 64px;
  position: relative;
  overflow: hidden;
  color:#fff;
}

.topbar::after{
  content:"";
  position:static !important; inset:auto -10% -20% -10%;
  height:90px;
  background:
    radial-gradient(60px 20px at 10% 60%, rgba(255,255,255,.15), transparent 60%),
    radial-gradient(80px 25px at 35% 70%, rgba(255,255,255,.12), transparent 60%),
    radial-gradient(70px 20px at 60% 75%, rgba(255,255,255,.10), transparent 60%),
    radial-gradient(80px 25px at 85% 65%, rgba(255,255,255,.12), transparent 60%);
  pointer-events:none;
}

.logo{ height:38px; }

/* ==== Menú de íconos (nav) ==== */
.nav-icons{
  background:#fff;
  display: flex;
  position: sticky; top: 64px; z-index: 1020;
  border-bottom: 6px solid transparent;
  background-clip: padding-box, border-box;
  border-image: linear-gradient(90deg, var(--ny-blue-700),var(--ny-red-500), var(--ny-blue-700)) 1;
}

/* Scroll horizontal suave en móviles */
.menu-scroll{
  overflow-x: auto;
  overflow-y: visible !important;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
}
.menu-scroll::-webkit-scrollbar{ height: 6px; }
.menu-scroll::-webkit-scrollbar-thumb{ background:#cfe2f3; border-radius: 4px; }

/* Asegurar que cada li actúe como ancla (sobrepone a .position-static de Bootstrap) */
.nav-item1.dropdown,
.nav-item2.dropdown,
.nav-item3.dropdown {
  position: relative !important;
}

/* Estilo base de los 3 menús */
#ddProductsMenu,
#ddInMenu,
#ddOutMenu {
  border: 1px solid #c72121;                 /* <- corrección */
  border-radius: 12px;                        /* un poco menos agresivo que 50px */
  box-shadow: var(--shadow-md, 0 10px 24px rgba(0,0,0,.12));
  margin-top: .5rem;
  z-index: 1100;

  /* Centrados bajo el toggle */
  position: absolute;                         /* gestionado por nosotros (display=static) */
  left: 50%;
  top: calc(100% + 6px);                      /* respeta tu data-bs-offset vertical */
  transform: translateX(-50%) translateY(-8px) scale(.98);
  transform-origin: top center;

  /* Animación de despliegue */
  opacity: 0;
  transition: opacity .18s ease, transform .18s ease;
}

/* Flechita (triángulo) arriba del menú */
#ddProductsMenu::before,
#ddInMenu::before,
#ddOutMenu::before {
  content: "";
  position: absolute;
  top: -7px;
  left: 50%;
  transform: translateX(-50%) rotate(45deg);
  width: 12px; height: 12px;
  background: #fff;
  border-left: 1px solid #c72121;
  border-top: 1px solid #c72121;
  z-index: -1;
}

/* Estado visible (Bootstrap añade .show al menú) */
.dropdown-menu.show {
  opacity: 1 !important;
  transform: translateX(-50%) translateY(0) scale(1) !important;
}

/* Opcional: en pantallas chicas deja que ocupe el ancho del contenedor */
@media (max-width: 575.98px) {
  #ddProductsMenu,
  #ddInMenu,
  #ddOutMenu {
    left: 0;
    right: 0;
    transform: translateX(0) translateY(-8px) scale(.98);
  }
  .dropdown-menu.show {
    transform: translateY(0) scale(1) !important;
  }
}

/* Menú en modo "portal" (por encima de todo) */
.dropdown-portal.dropdown-menu {
  position: fixed !important;          /* fuera de cualquier contenedor */
  left: 0; top: 0;                     /* luego JS coloca left/top exactos */
  transform: translateX(-50%) !important; /* centrado por JS con left = centro del toggle */
  z-index: 5000 !important;            /* más alto que cards/sticky/etc */
  margin: 0 !important;
}

/* Transición visible al abrir */
.dropdown-portal.dropdown-menu.show {
  opacity: 1 !important;
}

/* Opcional: si usas flechita en el menú, sigue funcionando */
.dropdown-portal.dropdown-menu::before {
  z-index: -1;
}

/* Tarjetita de acción */
.nav-item-link{
  display:inline-flex; flex-direction:column; align-items:center; gap:.4rem;
  width: 108px; padding:.7rem .55rem;
  border-radius:100%; background:#fff;
  position: relative;
  text-align: center;
  border:1px solid #ffffff;
}
.icon-bubble{
  display:grid; place-items:center;
  width:44px; height:44px; border-radius:12px;
  background: linear-gradient(145deg, var(--ny-blue-100), #ffffff);
  color: var(--ny-blue-600);
}

.nav-item-link:hover,
.nav-item-link:focus{
  color: var(--ny-blue-700);
  background: #ffffff;
}
.nav-label{ font-size:.74rem; font-weight:600; }

/* ===== Badge de estado con “pulso” ===== */
/* Mantengo la clase .bg-teal por compat: ahora es AZUL corporativo */
.bg-teal{ background: var(--ny-blue-600) ; color:#fff ; }
.badge-pulse{ position:relative; }
.badge-pulse::after{
  content:""; position:absolute; inset:0; border-radius:999px;
  border:2px solid rgba(9, 109, 249, 0.3);
  animation: pulse 1.8s infinite;
}
@keyframes pulse{
  0%{ transform:scale(1); opacity:.9; }
  70%{ transform:scale(1.35); opacity:0; }
  100%{ transform:scale(1.35); opacity:0; }
}

/* ===== Responsive ===== */
@media (max-width: 768px){
  .topbar{ height: 60px; }
  .nav-item-link{ width: 96px; }
  .icon-bubble{ width:42px; height:42px; }
}
@media (max-width: 576px){
  .nav-item-link{ width: 88px; padding:.6rem .45rem; }
  .icon-bubble{ width:40px; height:40px; border-radius:10px; }
  .nav-label{ font-size:.7rem; }
}

/* ===========================
   Animaciones & micro-UX
   =========================== */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
}

@keyframes floatSoft {
  0%,100% { transform: translateY(0); }
  50%     { transform: translateY(-3px); }
}
@keyframes hop {
  0%   { transform: translateY(0) scale(1); }
  35%  { transform: translateY(-6px) scale(1.02); }
  70%  { transform: translateY(1px) scale(0.995); }
  100% { transform: translateY(0) scale(1); }
}
@keyframes dropdownIn {
  0%   { opacity: 0; transform: translateY(8px) scale(0.98); filter: blur(4px); }
  100% { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
}
@keyframes dropdownItemIn {
  0%   { opacity: 0; transform: translateY(6px); }
  100% { opacity: 1; transform: translateY(0); }
}
@keyframes cardReveal {
  0%   { opacity: 0; transform: translateY(10px) scale(0.98); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes softGlow {
  0%,100% { box-shadow: 0 4px 14px rgba(0,0,0,.06) inset, 0 4px 10px rgba(0,0,0,.05); }
  50%     { box-shadow: 0 6px 16px rgba(0,0,0,.08) inset, 0 8px 16px rgba(0,0,0,.08); }
}

/* Estados aplicados */
.icon-bubble {
  animation: floatSoft 4s ease-in-out infinite;
  will-change: transform;
}
.nav-item-link:hover .icon-bubble,
.nav-item-link:focus .icon-bubble {
  animation: hop .6s ease;
}

/* Aparición inicial (se añade clase .is-revealed vía JS) */
.nav-item-link.has-anim {
  opacity: 0;
  transform: translateY(8px) scale(0.98);
}
.nav-item-link.has-anim.is-revealed {
  animation: cardReveal .5s cubic-bezier(.22,.61,.36,1) forwards;
}

/* Dropdown animado */
.nav-item .dropdown-menu {
  transform-origin: top center;
  animation: dropdownIn .22s ease both;
}
.nav-item .dropdown-menu .dropdown-item {
  opacity: 0;
  animation: dropdownItemIn .28s ease forwards;
}
.nav-item .dropdown-menu.show .dropdown-item {
  animation-delay: calc(var(--i, 0) * 40ms);
}

/* Destacar la tarjeta cuyo dropdown está abierto */
.nav-item.show .nav-item-link {
  box-shadow: 0 10px 26px rgba(0,0,0,0.10);
  border-color:#e2e8f3;
}
.nav-item.show .icon-bubble {
  animation: softGlow 2.4s ease-in-out infinite;
}

/* Efecto ripple al click en la tarjeta */
.nav-item-link { position: relative; overflow: hidden; }
.nav-item-link .ripple {
  position: absolute; border-radius: 50%; width: 10px; height: 10px;
  background: radial-gradient(closest-side, rgba(47,115,214,.25), rgba(47,115,214,0));
  transform: translate(-50%, -50%) scale(0); opacity: .9; pointer-events: none;
  animation: rippleAnim .6s ease-out forwards;
}
@keyframes rippleAnim { to { transform: translate(-50%, -50%) scale(18); opacity: 0; } }

.badge-pulse { filter: drop-shadow(0 0 6px rgba(10,91,202,.25)); }

@keyframes topbarIn { 0% { transform: translateY(-16px); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } }
.topbar { animation: topbarIn .38s ease-out both; }

/* =========================
   Estilos locales de la vista welcome
========================== */
.welcome-hero{
  background: linear-gradient(120deg, var(--ny-blue-700), var(--ny-red-500));
  color:#fff;
}
.welcome-hero .glassy{
  background: rgba(255,255,255,.15);
  backdrop-filter: blur(6px);
}
.hero-wave{
  position:absolute; left:0; right:0; bottom:-1px; width:100%; height:86px; opacity:.25;
  fill:#fff;
}

/* Atajos */
.quick-action{
  display:inline-flex; align-items:center; gap:.55rem;
  background:#fff; color: var(--ny-gray-700); text-decoration:none;
  border-radius: 999px; padding:.55rem .9rem; box-shadow: var(--shadow-sm);
  transition: transform .18s ease, box-shadow .18s ease, color .18s ease, background .18s ease;
  position: relative; overflow: hidden; border:1px solid #eef1f5;
}
.quick-action i{ font-size:1.05rem; color: var(--ny-blue-700); }
.quick-action:hover{
  transform: translateY(-2px); box-shadow: 0 10px 26px rgba(0,0,0,.10);
  color: var(--ny-blue-700); background:#fff;
}

/* KPIs */
.kpi-card{
  display:flex; align-items:center; gap:.9rem;
  background:#fff; border-radius:16px; padding:1rem 1rem; box-shadow: var(--shadow-sm);
  opacity:0; transform: translateY(8px) scale(.98);
  animation: cardReveal .5s cubic-bezier(.22,.61,.36,1) forwards;
  border-left: 6px solid var(--ny-blue-600);
}
.kpi-card .kpi-icon{
  display:grid; place-items:center; width:46px; height:46px; border-radius:12px;
  background: linear-gradient(145deg, var(--ny-blue-100), #ffffff);
  box-shadow: inset 0 4px 14px rgba(0,0,0,.06), 0 4px 10px rgba(0,0,0,.05);
  animation: floatSoft 4s ease-in-out infinite;
  color: var(--ny-red-500);
}
.kpi-card .kpi-icon i{ font-size:1.15rem; }
.kpi-body .kpi-label{ display:block; font-size:.8rem; color:var(--ny-gray-500); }
.kpi-body .kpi-value{ font-size:1.4rem; font-weight:800; color:var(--ny-gray-700); }

/* Cards de acción */
.action-card .icon-lg{
  display:grid; place-items:center; width:54px; height:54px; border-radius:14px;
  background: linear-gradient(145deg, var(--ny-blue-100), #ffffff);
  box-shadow: inset 0 4px 14px rgba(0,0,0,.06), 0 4px 10px rgba(0,0,0,.05);
  animation: floatSoft 4s ease-in-out infinite;
  font-size:1.25rem; color: var(--ny-blue-700);
}

/* Aparición escalonada reutilizada */
.has-anim{ opacity:0; transform: translateY(8px) scale(.98); }
.has-anim.is-revealed{ animation: cardReveal .5s cubic-bezier(.22,.61,.36,1) forwards; }

/* Transiciones suaves también para el topbar cuando se aplique transform */
.topbar.nav-animate {
  transition: box-shadow .25s ease, backdrop-filter .25s ease, transform .25s ease, opacity .25s ease;
}
.topbar.nav-animate.is-stuck {
  box-shadow: 0 4px 18px rgba(0,0,0,.06);
  backdrop-filter: saturate(108%) blur(4px);
}

/* Modal fullscreen coherente */
#stockAlertModal .modal-content { background:#fff; color: var(--ny-gray-700); }
#stockAlertModal .modal-header .badge { box-shadow: 0 2px 10px rgba(0,0,0,.08); }
#stockAlertModal .card { overflow: hidden; border-radius: 16px; }
#stockAlertModal .table tbody tr:hover { background: var(--ny-blue-100); }

/* =========================
   Footer
========================== */
.footer-ny {
  background: var(--ny-blue-700);
  color: #fff;
  position: static;
  z-index: 10 !important;
}
.footer-ny .footer-logo { height: 38px; }
.footer-ny .footer-link {
  color: #ffffffcc;
  text-decoration: none;
  transition: color .2s ease, transform .2s ease;
}
.footer-ny .footer-link:hover {
  color: var(--ny-red-500);
  transform: translateY(-2px);
}
.footer-ny .footer-social {
  display: inline-flex; align-items: center; justify-content: center;
  width: 36px; height: 36px; border-radius: 50%;
  color: #fff; background: var(--ny-red-500);
  transition: all .25s ease; font-size: 1rem;
}
.footer-ny .footer-social:hover {
  background: var(--ny-red-600);
  color: #fff;
  transform: translateY(-2px) scale(1.05);
}
.footer-divider { border-top: 1px solid rgba(255,255,255,.15); }
